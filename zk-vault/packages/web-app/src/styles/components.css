/**
 * ZK-Vault Component Styles
 * Using Tailwind CSS v4 modern features
 */

@layer components {
  /* === NAVIGATION === */
  .nav-sidebar {
    @apply @container fixed inset-y-0 left-0 z-50 w-64 border-r border-neutral-200 bg-white;
    @apply transform transition-transform duration-300;

    @media (prefers-color-scheme: dark) {
      @apply border-neutral-700 bg-neutral-900;
    }

    /* Container query for responsive navigation */
    @container (max-width: 768px) {
      @apply -translate-x-full;

      &.open {
        @apply translate-x-0;
      }
    }
  }

  .nav-item {
    @apply mx-2 flex items-center rounded-lg px-4 py-3 text-neutral-700 hover:bg-neutral-100;
    @apply transition-colors duration-200;

    @media (prefers-color-scheme: dark) {
      @apply text-neutral-300 hover:bg-neutral-800;
    }

    &.active {
      @apply bg-primary-50 font-medium text-primary-700;

      @media (prefers-color-scheme: dark) {
        @apply bg-primary-900/30 text-primary-300;
      }
    }
  }

  /* === FORMS === */
  .form-group {
    @apply space-y-2;
  }

  .form-label {
    @apply block text-sm font-medium text-neutral-700;

    @media (prefers-color-scheme: dark) {
      @apply text-neutral-300;
    }

    &.required::after {
      content: ' *';
      @apply text-danger-500;
    }
  }

  .form-input {
    @apply w-full rounded-lg border border-neutral-300 bg-white px-3 py-2;
    @apply focus:border-primary-500 focus:ring-1 focus:ring-primary-500;
    @apply placeholder-neutral-500 transition-all duration-200;

    @media (prefers-color-scheme: dark) {
      @apply border-neutral-600 bg-neutral-800 text-neutral-100;
      @apply placeholder-neutral-400;
    }

    &:invalid {
      @apply border-danger-500 focus:border-danger-500 focus:ring-danger-500;
    }

    &:disabled {
      @apply cursor-not-allowed bg-neutral-50 text-neutral-500;

      @media (prefers-color-scheme: dark) {
        @apply bg-neutral-900 text-neutral-600;
      }
    }
  }

  .form-error {
    @apply mt-1 text-sm text-danger-600;

    @media (prefers-color-scheme: dark) {
      @apply text-danger-400;
    }
  }

  /* === MODALS === */
  .modal-overlay {
    @apply fixed inset-0 z-50 bg-black/50 backdrop-blur-sm;
    @apply flex items-center justify-center p-4;

    .modal-content {
      @apply @container max-h-[90vh] w-full max-w-md overflow-auto rounded-xl bg-white shadow-xl;
      @apply transform transition-all duration-300;

      @media (prefers-color-scheme: dark) {
        @apply bg-neutral-800;
      }

      /* Container query for responsive modals */
      @container (min-width: 640px) {
        @apply max-w-lg;
      }

      @container (min-width: 1024px) {
        @apply max-w-2xl;
      }
    }
  }

  /* === CARDS === */
  .metric-card {
    @apply @container rounded-xl border border-neutral-200 bg-white p-6 shadow-sm;
    @apply transition-shadow duration-300 hover:shadow-md;

    @media (prefers-color-scheme: dark) {
      @apply border-neutral-700 bg-neutral-800;
    }

    .metric-icon {
      @apply flex h-12 w-12 items-center justify-center rounded-lg text-2xl;
      background: color-mix(in oklab, var(--color-primary-500) 10%, transparent);
    }

    .metric-value {
      @apply text-3xl font-bold text-neutral-900;

      @media (prefers-color-scheme: dark) {
        @apply text-neutral-100;
      }
    }

    .metric-label {
      @apply text-sm font-medium tracking-wide text-neutral-600 uppercase;

      @media (prefers-color-scheme: dark) {
        @apply text-neutral-400;
      }
    }

    .metric-trend {
      @apply inline-flex items-center rounded-full px-2 py-1 text-sm font-medium;

      &.positive {
        @apply bg-success-50 text-success-700;

        @media (prefers-color-scheme: dark) {
          @apply bg-success-900/30 text-success-300;
        }
      }

      &.negative {
        @apply bg-danger-50 text-danger-700;

        @media (prefers-color-scheme: dark) {
          @apply bg-danger-900/30 text-danger-300;
        }
      }
    }
  }

  /* === SECURITY COMPONENTS === */
  .security-indicator {
    @apply inline-flex items-center rounded-full px-3 py-1 text-sm font-medium;

    &.strength-weak {
      @apply border border-danger-200 bg-danger-50 text-danger-700;

      @media (prefers-color-scheme: dark) {
        @apply border-danger-800 bg-danger-900/30 text-danger-300;
      }
    }

    &.strength-fair {
      @apply border border-warning-200 bg-warning-50 text-warning-700;

      @media (prefers-color-scheme: dark) {
        @apply border-warning-800 bg-warning-900/30 text-warning-300;
      }
    }

    &.strength-good {
      @apply border border-success-200 bg-success-50 text-success-700;

      @media (prefers-color-scheme: dark) {
        @apply border-success-800 bg-success-900/30 text-success-300;
      }
    }

    &.strength-strong {
      @apply border border-primary-200 bg-primary-50 text-primary-700;

      @media (prefers-color-scheme: dark) {
        @apply border-primary-800 bg-primary-900/30 text-primary-300;
      }
    }
  }

  .password-strength-meter {
    @apply h-2 w-full overflow-hidden rounded-full bg-neutral-200;

    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-700;
    }

    .strength-fill {
      @apply h-full transition-all duration-500;

      &.weak {
        @apply w-1/4 bg-danger-500;
      }

      &.fair {
        @apply w-2/4 bg-warning-500;
      }

      &.good {
        @apply w-3/4 bg-success-500;
      }

      &.strong {
        @apply w-full bg-primary-500;
      }
    }
  }

  /* === FILE COMPONENTS === */
  .file-item {
    @apply @container flex items-center rounded-lg border border-neutral-200 bg-white p-4;
    @apply transition-all duration-200 hover:border-primary-300 hover:shadow-sm;

    @media (prefers-color-scheme: dark) {
      @apply border-neutral-700 bg-neutral-800 hover:border-primary-600;
    }

    .file-icon {
      @apply mr-3 flex h-10 w-10 items-center justify-center rounded-lg text-lg;
      background: color-mix(in oklab, var(--color-neutral-500) 10%, transparent);
    }

    .file-info {
      @apply min-w-0 flex-1;

      .file-name {
        @apply truncate font-medium text-neutral-900;

        @media (prefers-color-scheme: dark) {
          @apply text-neutral-100;
        }
      }

      .file-meta {
        @apply mt-1 text-sm text-neutral-500;

        @media (prefers-color-scheme: dark) {
          @apply text-neutral-400;
        }
      }
    }

    /* Container query for responsive file items */
    @container (max-width: 480px) {
      @apply flex-col items-start space-y-3;

      .file-icon {
        @apply mr-0;
      }
    }
  }

  /* === CHARTS === */
  .chart-container {
    @apply @container rounded-xl border border-neutral-200 bg-white p-6 shadow-sm;

    @media (prefers-color-scheme: dark) {
      @apply border-neutral-700 bg-neutral-800;
    }

    .chart-title {
      @apply mb-4 text-lg font-semibold text-neutral-900;

      @media (prefers-color-scheme: dark) {
        @apply text-neutral-100;
      }
    }

    .chart-legend {
      @apply mb-4 flex flex-wrap gap-4;

      @container (max-width: 480px) {
        @apply flex-col gap-2;
      }
    }

    .legend-item {
      @apply flex items-center gap-2 text-sm text-neutral-600;

      @media (prefers-color-scheme: dark) {
        @apply text-neutral-400;
      }

      .legend-color {
        @apply h-3 w-3 rounded-sm;
      }
    }
  }

  /* === LOADING STATES === */
  .skeleton {
    @apply animate-pulse rounded bg-neutral-200;

    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-700;
    }

    &.skeleton-text {
      @apply h-4 w-3/4;
    }

    &.skeleton-title {
      @apply h-6 w-1/2;
    }

    &.skeleton-avatar {
      @apply h-10 w-10 rounded-full;
    }

    &.skeleton-button {
      @apply h-10 w-24;
    }
  }

  /* === NOTIFICATIONS === */
  .notification {
    @apply @container pointer-events-auto w-full max-w-sm overflow-hidden rounded-lg bg-white shadow-lg;
    @apply ring-opacity-5 ring-1 ring-black;

    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-800 ring-neutral-700;
    }

    &.notification-success {
      @apply border-l-4 border-success-500;
    }

    &.notification-warning {
      @apply border-l-4 border-warning-500;
    }

    &.notification-error {
      @apply border-l-4 border-danger-500;
    }

    &.notification-info {
      @apply border-l-4 border-primary-500;
    }
  }

  /* === TOOLTIPS === */
  .tooltip {
    @apply absolute z-50 rounded bg-neutral-900 px-2 py-1 text-sm text-white shadow-lg;
    @apply pointer-events-none opacity-0 transition-opacity duration-200;

    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-700;
    }

    &.tooltip-visible {
      @apply pointer-events-auto opacity-100;
    }

    /* Tooltip arrows using modern CSS */
    &[data-placement^='top']::after {
      content: '';
      @apply absolute top-full left-1/2 -translate-x-1/2;
      border: 4px solid transparent;
      border-top-color: var(--color-neutral-900);
    }
  }
}
