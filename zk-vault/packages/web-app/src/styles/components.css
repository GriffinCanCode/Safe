/**
 * ZK-Vault Component Styles
 * Using Tailwind CSS v4 modern features
 */

@layer components {
  /* === NAVIGATION === */
  .nav-sidebar {
    @apply @container fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-neutral-200;
    @apply transform transition-transform duration-300;
    
    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-900 border-neutral-700;
    }

    /* Container query for responsive navigation */
    @container (max-width: 768px) {
      @apply -translate-x-full;
      
      &.open {
        @apply translate-x-0;
      }
    }
  }

  .nav-item {
    @apply flex items-center px-4 py-3 text-neutral-700 hover:bg-neutral-100 rounded-lg mx-2;
    @apply transition-colors duration-200;
    
    @media (prefers-color-scheme: dark) {
      @apply text-neutral-300 hover:bg-neutral-800;
    }

    &.active {
      @apply bg-primary-50 text-primary-700 font-medium;
      
      @media (prefers-color-scheme: dark) {
        @apply bg-primary-900/30 text-primary-300;
      }
    }
  }

  /* === FORMS === */
  .form-group {
    @apply space-y-2;
  }

  .form-label {
    @apply block text-sm font-medium text-neutral-700;
    
    @media (prefers-color-scheme: dark) {
      @apply text-neutral-300;
    }

    &.required::after {
      content: " *";
      @apply text-danger-500;
    }
  }

  .form-input {
    @apply w-full px-3 py-2 border border-neutral-300 rounded-lg bg-white;
    @apply focus:border-primary-500 focus:ring-1 focus:ring-primary-500;
    @apply placeholder-neutral-500 transition-all duration-200;
    
    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-800 border-neutral-600 text-neutral-100;
      @apply placeholder-neutral-400;
    }

    &:invalid {
      @apply border-danger-500 focus:border-danger-500 focus:ring-danger-500;
    }

    &:disabled {
      @apply bg-neutral-50 text-neutral-500 cursor-not-allowed;
      
      @media (prefers-color-scheme: dark) {
        @apply bg-neutral-900 text-neutral-600;
      }
    }
  }

  .form-error {
    @apply text-sm text-danger-600 mt-1;
    
    @media (prefers-color-scheme: dark) {
      @apply text-danger-400;
    }
  }

  /* === MODALS === */
  .modal-overlay {
    @apply fixed inset-0 z-50 bg-black/50 backdrop-blur-sm;
    @apply flex items-center justify-center p-4;
    
    .modal-content {
      @apply @container bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-auto;
      @apply transform transition-all duration-300;
      
      @media (prefers-color-scheme: dark) {
        @apply bg-neutral-800;
      }

      /* Container query for responsive modals */
      @container (min-width: 640px) {
        @apply max-w-lg;
      }

      @container (min-width: 1024px) {
        @apply max-w-2xl;
      }
    }
  }

  /* === CARDS === */
  .metric-card {
    @apply @container bg-white rounded-xl p-6 shadow-sm border border-neutral-200;
    @apply hover:shadow-md transition-shadow duration-300;
    
    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-800 border-neutral-700;
    }

    .metric-icon {
      @apply w-12 h-12 rounded-lg flex items-center justify-center text-2xl;
      background: color-mix(in oklab, var(--color-primary-500) 10%, transparent);
    }

    .metric-value {
      @apply text-3xl font-bold text-neutral-900;
      
      @media (prefers-color-scheme: dark) {
        @apply text-neutral-100;
      }
    }

    .metric-label {
      @apply text-sm font-medium text-neutral-600 uppercase tracking-wide;
      
      @media (prefers-color-scheme: dark) {
        @apply text-neutral-400;
      }
    }

    .metric-trend {
      @apply inline-flex items-center text-sm font-medium rounded-full px-2 py-1;
      
      &.positive {
        @apply text-success-700 bg-success-50;
        
        @media (prefers-color-scheme: dark) {
          @apply text-success-300 bg-success-900/30;
        }
      }

      &.negative {
        @apply text-danger-700 bg-danger-50;
        
        @media (prefers-color-scheme: dark) {
          @apply text-danger-300 bg-danger-900/30;
        }
      }
    }
  }

  /* === SECURITY COMPONENTS === */
  .security-indicator {
    @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
    
    &.strength-weak {
      @apply bg-danger-50 text-danger-700 border border-danger-200;
      
      @media (prefers-color-scheme: dark) {
        @apply bg-danger-900/30 text-danger-300 border-danger-800;
      }
    }

    &.strength-fair {
      @apply bg-warning-50 text-warning-700 border border-warning-200;
      
      @media (prefers-color-scheme: dark) {
        @apply bg-warning-900/30 text-warning-300 border-warning-800;
      }
    }

    &.strength-good {
      @apply bg-success-50 text-success-700 border border-success-200;
      
      @media (prefers-color-scheme: dark) {
        @apply bg-success-900/30 text-success-300 border-success-800;
      }
    }

    &.strength-strong {
      @apply bg-primary-50 text-primary-700 border border-primary-200;
      
      @media (prefers-color-scheme: dark) {
        @apply bg-primary-900/30 text-primary-300 border-primary-800;
      }
    }
  }

  .password-strength-meter {
    @apply w-full h-2 bg-neutral-200 rounded-full overflow-hidden;
    
    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-700;
    }

    .strength-fill {
      @apply h-full transition-all duration-500;
      
      &.weak {
        @apply w-1/4 bg-danger-500;
      }
      
      &.fair {
        @apply w-2/4 bg-warning-500;
      }
      
      &.good {
        @apply w-3/4 bg-success-500;
      }
      
      &.strong {
        @apply w-full bg-primary-500;
      }
    }
  }

  /* === FILE COMPONENTS === */
  .file-item {
    @apply @container flex items-center p-4 bg-white rounded-lg border border-neutral-200;
    @apply hover:border-primary-300 hover:shadow-sm transition-all duration-200;
    
    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-800 border-neutral-700 hover:border-primary-600;
    }

    .file-icon {
      @apply w-10 h-10 rounded-lg flex items-center justify-center text-lg mr-3;
      background: color-mix(in oklab, var(--color-neutral-500) 10%, transparent);
    }

    .file-info {
      @apply flex-1 min-w-0;
      
      .file-name {
        @apply font-medium text-neutral-900 truncate;
        
        @media (prefers-color-scheme: dark) {
          @apply text-neutral-100;
        }
      }

      .file-meta {
        @apply text-sm text-neutral-500 mt-1;
        
        @media (prefers-color-scheme: dark) {
          @apply text-neutral-400;
        }
      }
    }

    /* Container query for responsive file items */
    @container (max-width: 480px) {
      @apply flex-col items-start space-y-3;
      
      .file-icon {
        @apply mr-0;
      }
    }
  }

  /* === CHARTS === */
  .chart-container {
    @apply @container bg-white rounded-xl p-6 shadow-sm border border-neutral-200;
    
    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-800 border-neutral-700;
    }

    .chart-title {
      @apply text-lg font-semibold text-neutral-900 mb-4;
      
      @media (prefers-color-scheme: dark) {
        @apply text-neutral-100;
      }
    }

    .chart-legend {
      @apply flex flex-wrap gap-4 mb-4;
      
      @container (max-width: 480px) {
        @apply flex-col gap-2;
      }
    }

    .legend-item {
      @apply flex items-center gap-2 text-sm text-neutral-600;
      
      @media (prefers-color-scheme: dark) {
        @apply text-neutral-400;
      }

      .legend-color {
        @apply w-3 h-3 rounded-sm;
      }
    }
  }

  /* === LOADING STATES === */
  .skeleton {
    @apply animate-pulse bg-neutral-200 rounded;
    
    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-700;
    }

    &.skeleton-text {
      @apply h-4 w-3/4;
    }

    &.skeleton-title {
      @apply h-6 w-1/2;
    }

    &.skeleton-avatar {
      @apply w-10 h-10 rounded-full;
    }

    &.skeleton-button {
      @apply h-10 w-24;
    }
  }

  /* === NOTIFICATIONS === */
  .notification {
    @apply @container pointer-events-auto w-full max-w-sm overflow-hidden rounded-lg bg-white shadow-lg;
    @apply ring-1 ring-black ring-opacity-5;
    
    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-800 ring-neutral-700;
    }

    &.notification-success {
      @apply border-l-4 border-success-500;
    }

    &.notification-warning {
      @apply border-l-4 border-warning-500;
    }

    &.notification-error {
      @apply border-l-4 border-danger-500;
    }

    &.notification-info {
      @apply border-l-4 border-primary-500;
    }
  }

  /* === TOOLTIPS === */
  .tooltip {
    @apply absolute z-50 px-2 py-1 text-sm text-white bg-neutral-900 rounded shadow-lg;
    @apply opacity-0 pointer-events-none transition-opacity duration-200;
    
    @media (prefers-color-scheme: dark) {
      @apply bg-neutral-700;
    }

    &.tooltip-visible {
      @apply opacity-100 pointer-events-auto;
    }

    /* Tooltip arrows using modern CSS */
    &[data-placement^="top"]::after {
      content: "";
      @apply absolute top-full left-1/2 -translate-x-1/2;
      border: 4px solid transparent;
      border-top-color: var(--color-neutral-900);
    }
  }
}
